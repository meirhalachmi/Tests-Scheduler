{"version":3,"sources":["utils/utils.js","components/Subjects/Subjects.js","components/ScheduleCalendar/material_title_panel.js","actions/index.js","components/ScheduleCalendar/helpers.js","components/ModalForm.js","components/BlockerForm.js","components/TestForm.js","components/ScheduleCalendar/ScheduleCalendar.js","components/Home/Home.js","components/SetupSession.js","components/Cards/SessionCard.js","components/SelectSession.js","components/SessionHome.js","components/app/App.js","serviceWorker.js","reducers/index.js","configureStore.js","index.js"],"names":["range","start","end","Array","fill","map","_","idx","Err","_ref","error","react_default","a","createElement","message","DisplayRemoteData","props","_useFetch","useFetch","url","data","utils_Err","preProcess","parserFunction","sortByName","list","sort","b","name","isEmpty","obj","key","hasOwnProperty","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","length","join","ColumnContainer","styled","div","_templateObject","SupTitle","_templateObject2","move","source","destination","droppableSource","droppableDestination","sourceClone","from","destClone","_sourceClone$splice","splice","index","removed","Object","slicedToArray","push","result","droppableId","Subjects","context","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","groupToListItem","group","item","id","content","subjects","get","addList","lists","state","concat","titles","setState","removeList","removedList","getList","parseInt","onDragEnd","toConsumableArray","getGroupedSubjectsRequest","Request","process","getSubjectsRequest","handleSubmit","bind","assertThisInitialized","fetch","then","response","json","initialGroupedSubjects","Map","v","value","initialNoGroup","initialGroups","title","_this2","index_es","icon","faTrashAlt","onClick","react_beautiful_dnd_esm","toString","provided","snapshot","ref","innerRef","style","isDraggingOver","background","padding","width","draggableId","assign","draggableProps","dragHandleProps","isDragging","draggableStyle","objectSpread","userSelect","grid","margin","color","placeholder","e","_this3","preventDefault","newGroups","gr","no_pars","shift","par_groups","isValid","forEach","i","alert","msg","no_parallels","parallel_groups","axios","post","history","catch","console","_this4","getColumnContainer","Button_default","Component","connect","session","isFetching","items","sessionId","styles","root","fontFamily","fontWeight","header","backgroundColor","fontSize","MaterialTitlePanel","rootStyle","children","REQUEST","RECEIVE","INIT_SESSION","FetchActionCreator","paramsUrlAddition","arguments","undefined","postprocessorFunction","dispatch","type","toUpperCase","receivedAt","now","receive","fetchSubjects","fetchClasses","fetchBlockers","fetchTests","fetchSessionInfo","fetchScheduledTests","fetchSavedSchedules","fetchSession","resetSchedule","sidebar","sidebarLink","display","textDecoration","divider","height","paddingTop","paddingBottom","Event","event","Fragment","es6","desc","parseDateString","setHours","getTime","ModalForm","_Component","apply","inherits","createClass","Modal_default","size","show","onHide","aria-labelledby","Header","closeButton","Title","Body","BlockerForm","numOfInstances","blockerToEdit","startDates","fieldName","blocker","startsWith","ind","replace","wantedDates","Container_default","Form","onSubmit","Row","Col","md","Group","Label","Control","required","maxLength","defaultValue","getCurrentValue","as","multiple","classes","s","min","minDate","max","maxDate","startHour","endHour","es_Button","target","participatingClasses","options","filter","o","selected","participatingSubjects","endDates","startHours","endHours","afterSend","React","startDate","endDate","daysInWeek","0","1","2","3","4","5","TestForm","numOfOptionalTimes","testToEdit","numOfTests","test","controlId","onChange","defaultGap","step","format","entries","entry","requiredkey","label","subject","daysGap","optionalDaysInWeek","optionalStartHours","optionalEndHours","difficulty","localizer","BigCalendar","momentLocalizer","moment","ScheduleCalendar","SidebarContent","arr","criteria","subjectsDiv","testsGroupedBySubject","testsToSchedule","info","reduce","subjectsDict","keys","subjectId","test_div","test_div_ids","numOfOptionalDates","optionalDates","className","howManyLeft","cls","classesDict","selectedTestIndInList","indexOf","selectedTestId","dist_default","disabled","res","days","optionalDays","window","Card_default","Accordion_default","Toggle","Card","eventKey","Collapse","material_title_panel","faSave","prompt","faEraser","faRobot","milliseconds","Promise","resolve","setTimeout","faPlus","showTestForm","faLock","showBlockerForm","ModalForm_ModalForm","modalFormData","closeModals","components_BlockerForm","components_TestForm","scheduledTests","testEvents","filteredClassOnSchedule","blockerModalShow","testModalShow","customDayPropGetter","endPoint","method","headers","Content-Type","body","JSON","stringify","includes","border","sidebarProps","docked","sidebarClassName","contentId","open","touch","shadow","pullRight","transitions","isBefore","add","calendarsBody","getBigCalendar","createRef","react_sidebar_esm","scheduleDifficulty","ButtonToolbar_default","DropdownButton_default","variant","savedSchedules","savedSchedule","daysPassed","date1","date2","date1_ms","date2_ms","difference_ms","Math","abs","floor","daysBetween","dateSaved","Dropdown_default","Item","onSelect","storeid","r","Tabs_default","defaultActiveKey","Tab_default","tests","rtl","testsDict","fetch_delete","blockers","blockersDict","defaultDate","react_big_calendar_esm","popup","selectable","defaultView","views","events","blockerEvents","startAccessor","endAccessor","onSelectEvent","testId","testid","unscheduleTest","onSelectSlot","slotInfo","components","dayPropGetter","testFormProps","blockerFormProps","cur","defineProperty","schedule","alreadyScheduledCount","st","howManyNeeded","unscheduledTestsOption","unscheduledTestsOptions","ar","scheduledTestInfo","scheduledTest","testName","commonStartingSubstringInClassNames","arr1","a1","a2","L","charAt","substring","longestCommonStartingSubstring","ApiList","react","fallback","utils_DisplayRemoteData","Home","Home_ApiList","SetupSession","sendSession","defaults","sessionName","numOfHours","isZeroHour","handleInputChange","checked","DefaultsForm","Form_default","Col_default","Check","SetupSession_List","sendText","maxInputLength","setParentList","List","text","handleChange","newList","SessionCard","Text","toLocaleDateString","react_router_dom","to","sendSelectSession","SelectSession","sessions","active","sess","SessionCard_SessionCard","SessionHome","warn","components_ScheduleCalendar_ScheduleCalendar","AsyncApp","basename","alignItems","react_router","exact","path","component","AddTests","AddBlockers","SessionSetup","Boolean","location","hostname","match","ReducerCreator","action","lastUpdated","combineReducers","horizon","loggerMiddleware","createLogger","store","preloadedState","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","rootReducer","applyMiddleware","thunkMiddleware","configureStore","ReactDOM","render","es","app_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d2c036fd.chunk.js","sourcesContent":["import {useFetch} from \"react-hooks-fetch\";\nimport React from \"react\";\n\nexport function Sleep(milliseconds) {\n    return new Promise(resolve => setTimeout(resolve, milliseconds))\n}\n\nexport function fillArray(value, length) {\n    return Array.from({ length }, () => value);\n}\n\n\nexport function range(start, end) {\n    return Array(end - start + 1).fill().map((_, idx) => start + idx)\n}\n\nconst Err = ({ error }) => <span>Error:{error.message}</span>;\n\nexport const DisplayRemoteData = (props) => {\n    let { error, data } = useFetch(props.url);\n    if (error) return <Err error={error} />;\n    if (!data) return null;\n    if (props.preProcess){\n        data = props.preProcess(data);\n    }\n    return data.map(props.parserFunction)\n};\n\nexport function sortByName(list) {\n    return list.sort((a, b) => (a.name > b.name) ? 1 : -1);\n}\n\nexport function isEmpty(obj) {\n    for(const key in obj) {\n        if(obj.hasOwnProperty(key))\n            return false;\n    }\n    return true;\n}\n\nexport function formatDate(date) {\n    var d = new Date(date);\n    let month = '' + (d.getMonth() + 1);\n    let day = '' + d.getDate();\n    let year = d.getFullYear();\n\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n    return [year, month, day].join('-');\n}\n\nexport function daysBetween(date1, date2) {\n\n    // The number of milliseconds in one day\n    var ONE_DAY = 1000 * 60 * 60 * 24;\n\n    // Convert both dates to milliseconds\n    var date1_ms = date1.getTime();\n    var date2_ms = date2.getTime();\n\n    // Calculate the difference in milliseconds\n    var difference_ms = Math.abs(date1_ms - date2_ms);\n\n    // Convert back to days and return\n    return Math.floor(difference_ms/ONE_DAY);\n\n}\n\n/*!\n * Group items from an array together by some criteria or value.\n * (c) 2019 Tom Bremmer (https://tbremer.com/) and Chris Ferdinandi (https://gomakethings.com), MIT License,\n * @param  {Array}           arr      The array to group items from\n * @param  {String|Function} criteria The criteria to group by\n * @return {Object}                   The grouped object\n */\nexport function groupBy(arr, criteria) {\n    return arr.reduce(function (obj, item) {\n\n        // Check if the criteria is a function to run on the item or a property of it\n        const key = typeof criteria === 'function' ? criteria(item) : item[criteria];\n\n        // If the key doesn't exist yet, create it\n        if (!obj.hasOwnProperty(key)) {\n            obj[key] = [];\n        }\n\n        // Push the value to the object\n        obj[key].push(item);\n\n        // Return the object to the next item in the loop\n        return obj;\n\n    }, {});\n}\n\nexport function longestCommonStartingSubstring(arr1){\n    let arr = arr1.concat().sort(),\n        a1 = arr[0], a2 = arr[arr.length - 1], L = a1.length, i = 0;\n    while(i< L && a1.charAt(i)=== a2.charAt(i)) i++;\n    return a1.substring(0, i);\n}","import React, { Component } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport \"./Subjects.css\";\nimport styled from \"styled-components\";\nimport Button from 'react-bootstrap/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons'\nimport axios from 'axios/index';\nimport {fillArray   } from \"../../utils/utils\";\nimport {connect} from \"react-redux\";\n\nconst ColumnContainer = styled.div`\n  margin: 10px;\n  border: 1px solid lightgrey;\n  border-radius: 5px;\n  // width: 50%;\n  display: flex;\n  flex-direction: column;\n`;\nconst SupTitle = styled.div`\n  padding: 10px;\n`;\n\n/**\n * Moves an item from one list to another list.\n */\nconst move = (source, destination, droppableSource, droppableDestination) => {\n    const sourceClone = Array.from(source);\n    const destClone = Array.from(destination);\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\n\n    destClone.push(removed);\n    const result = {};\n    result[droppableSource.droppableId] = sourceClone;\n    result[droppableDestination.droppableId] = destClone;\n\n    return result;\n};\n\nconst grid = 8;\n\nconst getItemStyle = (isDragging, draggableStyle) => ({\n    // some basic styles to make the items look a bit nicer\n    userSelect: 'none',\n    padding: grid * 2,\n    margin: `0 0 ${grid}px 0`,\n\n    // change background colour if dragging\n    background: isDragging ? 'lightgreen' : 'grey',\n    color: isDragging ? 'black' : 'white',\n\n    // styles we need to apply on draggables\n    ...draggableStyle\n});\n\nconst getListStyle = isDraggingOver => ({\n    background: isDraggingOver ? 'lightblue' : 'lightgrey',\n    padding: grid,\n    width: 250\n});\n\n\n\n\nclass Subjects extends Component {\n\n    constructor(props: P, context: any) {\n        super(props, context);\n        this.getGroupedSubjectsRequest = new Request(\n            process.env.REACT_APP_API_URL + '/groupedSubjects');\n        this.getSubjectsRequest = new Request(\n            process.env.REACT_APP_API_URL + '/subjects');\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.state = {\n            lists: [[]],\n            titles: ['מקצועות ליבה'],\n        }\n        fetch(this.getGroupedSubjectsRequest)\n            .then(response => response.json())\n            .then(data => {\n                this.initialGroupedSubjects = data;\n            }).then(() => {\n            fetch(this.getSubjectsRequest)\n                .then(response => response.json())\n                .then(data => {\n                    this.subjects = new Map(data.map(v => [v.id, v.name]));\n                }).then(\n                () => {\n                    this.initialNoGroup = this.initialGroupedSubjects['no_group'];\n                    this.initialGroups = this.initialGroupedSubjects['groups'];\n                    // console.log(this.initialGroupedSubjects)\n                    this.setState( {\n                            lists: Array(this.groupToListItem(this.initialNoGroup)).concat(\n                                this.initialGroups.map(group => this.groupToListItem(group))\n                            ),\n                            titles: ['מקצועות ליבה'].concat(fillArray('אשכול מגמות', this.initialGroups.length))\n                        }\n                    )\n                }\n            )\n        })\n    };\n\n    groupToListItem = group => {\n        return group.map((item) => ({id: item, content: this.subjects.get(item)}))\n    }\n\n\n    addList = () => {\n        const lists = this.state.lists.concat([[]]);\n        const titles = this.state.titles.concat('אשכול מגמות');\n        this.setState({\n                lists: lists,\n                titles: titles\n            }\n        );\n        // this.render();\n    };\n\n    removeList = (id) => {\n        const removedList = this.state.lists[id];\n        const lists = Array.from(this.state.lists);\n        const titles = Array.from(this.state.titles);\n\n        lists.splice(id, 1);\n        titles.splice(id, 1);\n\n        lists[0] = lists[0].concat(removedList);\n\n        this.setState({\n                lists: lists,\n                titles: titles\n            }\n        );\n    }\n\n    getList = id => this.state.lists[parseInt(id)];\n\n    onDragEnd = result => {\n        const { source, destination } = result;\n\n        // dropped outside the list\n\n        if (!destination) {\n            return;\n        }\n\n        if (source.droppableId === destination.droppableId) {\n            // Do nothing\n        } else {\n            const result = move(\n                this.getList(source.droppableId),\n                this.getList(destination.droppableId),\n                source,\n                destination\n            );\n            const lists = [...this.state.lists]\n            lists[source.droppableId] = result[source.droppableId]\n            lists[destination.droppableId] = result[destination.droppableId]\n            this.setState({\n                lists: lists\n            });\n        }\n    };\n\n    // Normally you would want to split things out into separate components.\n    getColumnContainer(index, title) {\n        return <ColumnContainer key={index}>\n            <SupTitle>{title} {index > 0 &&<span><FontAwesomeIcon icon={faTrashAlt} onClick={()=>{this.removeList(index)}}/></span>}</SupTitle>\n\n            <Droppable droppableId={index.toString()}>\n                {(provided, snapshot) => (\n                    <div\n                        ref={provided.innerRef}\n                        style={getListStyle(snapshot.isDraggingOver)}>\n                        {this.state.lists[index].map((item, index) => (\n                            <Draggable\n                                key={item.id}\n                                draggableId={item.id}\n                                index={index}>\n                                {(provided, snapshot) => (\n                                    <div\n                                        ref={provided.innerRef}\n                                        {...provided.draggableProps}\n                                        {...provided.dragHandleProps}\n                                        style={getItemStyle(\n                                            snapshot.isDragging,\n                                            provided.draggableProps.style\n                                        )}>\n                                        {item.content}\n                                    </div>\n                                )}\n                            </Draggable>\n                        ))}\n                        {provided.placeholder}\n                    </div>\n                )}\n            </Droppable>\n        </ColumnContainer>;\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        let newGroups = this.state.lists.map(gr => gr.map(v => v.id));\n        let no_pars = newGroups.shift()\n        let par_groups = newGroups.length === 0 ? [[]] : newGroups;\n\n        let isValid = true;\n        par_groups.forEach((group, i) => {\n            if (group.length === 1){\n                alert('אשכול מגמות לא יכול להכיל רק מקצוע אחד')\n                isValid = false;\n            }\n        })\n        if (isValid){\n            let msg = {\n                no_parallels: [no_pars],\n                parallel_groups: [par_groups],\n            };\n\n            axios.post(process.env.REACT_APP_API_URL + '/groupedSubjects', msg)\n                .then(() => this.props.history.push('/calendar'))\n                .catch(console.error);\n        }\n    }\n\n\n    render() {\n        return (\n            <div>\n                <div id='root'>\n                    <DragDropContext onDragEnd={this.onDragEnd}>\n                        {this.state.titles.map(\n                            (item, i, key) => this.getColumnContainer(i, this.state.titles[i])\n                        )}\n\n                    </DragDropContext>\n                    <ColumnContainer><Button onClick={()=>{this.addList()}}>הוסף אשכול</Button></ColumnContainer>\n                </div>\n                <Button onClick={this.handleSubmit}>\n                    Send\n                </Button>\n            </div>\n        );\n    }\n}\nfunction mapStateToProps(state) {\n    const { subjects, session } = state;\n    const { isFetching, items } = subjects;\n    return {\n        sessionId: session.id,\n        subjects: items,\n        isFetching,\n    }\n}\n\nexport default connect(mapStateToProps)(Subjects);","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst styles = {\n    root: {\n        fontFamily:\n            '\"HelveticaNeue-Light\", \"Helvetica Neue Light\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n        fontWeight: 300\n    },\n    header: {\n        backgroundColor: \"#03a9f4\",\n        color: \"white\",\n        padding: \"16px\",\n        fontSize: \"1.5em\"\n    }\n};\n\nconst MaterialTitlePanel = props => {\n    const rootStyle = props.style\n        ? { ...styles.root, ...props.style }\n        : styles.root;\n\n    return (\n        <div style={rootStyle}>\n            <div style={styles.header}>{props.title}</div>\n            {props.children}\n        </div>\n    );\n};\n\nMaterialTitlePanel.propTypes = {\n    style: PropTypes.object,\n    title: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    children: PropTypes.object\n};\n\nexport default MaterialTitlePanel;\n","import axios from \"axios\";\nimport {Sleep, sortByName} from \"../utils/utils\";\n\nexport const REQUEST = 'REQUEST';\nexport const RECEIVE = 'RECEIVE';\nexport const SCHEDULE = 'SCHEDULE';\nexport const UNSCHEDULE = 'UNSCHEDULE';\nexport const RESET_SCHEDULE = 'RESET_SCHEDULE';\nexport const INIT_SESSION = 'INIT_SESSION';\n\nfunction FetchActionCreator(name, url) {\n\n    function request() {\n        return {\n            type: REQUEST+ '_' + name.toUpperCase(),\n        }\n    }\n\n    function receive(json, postprocessorFunction) {\n        return {\n            type: RECEIVE + '_' + name.toUpperCase(),\n            items: postprocessorFunction(json),\n            receivedAt: Date.now()\n        }\n    }\n\n    return function (paramsUrlAddition='', postprocessorFunction=(json)=>(json)) {\n        return dispatch => {\n            dispatch(request());\n            return fetch(url + paramsUrlAddition)\n                .then(response => response.json())\n                .then(json => dispatch(receive(json, postprocessorFunction)))\n        }\n    }\n\n}\n\n\nconst fetchSubjects = FetchActionCreator('Subjects', process.env.REACT_APP_API_URL + '/subjects',\n    sortByName)\nconst fetchClasses = FetchActionCreator('Classes', process.env.REACT_APP_API_URL + '/classes')\nconst fetchBlockers = FetchActionCreator('Blockers', process.env.REACT_APP_API_URL + '/blockers')\nconst fetchTests = FetchActionCreator('Tests', process.env.REACT_APP_API_URL + '/tests')\nconst fetchSessionInfo = FetchActionCreator('Session', process.env.REACT_APP_API_URL + '/sessioninfo')\n\n\nexport const fetchScheduledTests = FetchActionCreator('Schedule', process.env.REACT_APP_API_URL + '/currentscheduledtests')\nexport const fetchSavedSchedules = FetchActionCreator('ScheduleStore', process.env.REACT_APP_API_URL + '/schedulerstatestore')\n\nexport function fetchSession() {\n    return dispatch => {\n        dispatch({\n            type: INIT_SESSION,\n        })\n        dispatch(fetchSessionInfo());\n        dispatch(fetchSubjects());\n        dispatch(fetchClasses());\n        dispatch(fetchBlockers());\n        dispatch(fetchTests());\n        dispatch(fetchScheduledTests());\n        dispatch(fetchSavedSchedules());\n\n    }\n\n}\n\n\nexport const scheduleTest = (testId, date) => {\n    // return {\n    //   type: SCHEDULE,\n    //   testId,\n    //   date\n    // }scheduledTests\n    return dispatch => {\n        const msg = {\n            testid: testId.toString(),\n            date: date\n        }\n        return axios.post(process.env.REACT_APP_API_URL + '/scheduletest', msg)\n            .then(\n                dispatch(\n                    {\n                        type: SCHEDULE,\n                        id: testId,\n                        date: date\n                    }\n\n                )\n            )\n            .then(() => {\n                return dispatch(fetchScheduledTests())\n            })\n    }\n\n}\n\nexport const unscheduleTest = (testId, date) => {\n    return dispatch => {\n        const msg = {\n            testid: testId.toString(),\n            date: date\n        }\n        return axios.post(process.env.REACT_APP_API_URL + '/unscheduletest', msg)\n            .then(\n                dispatch(\n                    {\n                        type: UNSCHEDULE,\n                        id: testId,\n                        date: date\n                    }\n\n                )\n            )\n            .then(() => {\n                return dispatch(fetchScheduledTests())\n            })\n    }\n}\n\n\nexport const resetSchedule = () => {\n    return dispatch => {\n        const msg = {\n        }\n        return axios.post(process.env.REACT_APP_API_URL + '/resetschedule', msg)\n            .then(\n                dispatch(\n                    {\n                        type: UNSCHEDULE,\n                    }\n\n                )\n            )\n            .then(() => {\n                // Sleep(1000);\n                return dispatch(fetchScheduledTests())\n            })\n    }\n}\n\n","import React from \"react\";\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\n\nexport const styles = {\n    sidebar: {\n        width: 300,\n        // marginLeft: '15%',\n        // paddingRight: '16px'\n        // height: \"100%\"\n    },\n    sidebarLink: {\n        display: \"block\",\n        padding: \"16px 0px\",\n        color: \"#757575\",\n        textDecoration: \"none\"\n    },\n    divider: {\n        margin: \"8px 0\",\n        height: 1,\n        backgroundColor: \"#757575\"\n    },\n    content: {\n        padding: \"16px\",\n        paddingTop: \"30px\",\n        paddingBottom: \"30px\",\n        // height: \"70%\",\n        backgroundColor: \"white\",\n        // marginLeft: '15%'\n    }\n};\n\nexport function Event({event}) {\n    const color = event.type === 'blocker' ? 'red' : 'blue';\n    return (\n        <>\n            <ContextMenuTrigger id={event.type + event.id.toString()}>\n                <div style={{backgroundColor: color, fontSize: '15px'}}>\n                    <strong>{event.title}</strong>\n                    {event.desc && ':  ' + event.desc}\n                </div>\n            </ContextMenuTrigger>\n        </>\n    )\n}\n\nexport function parseDateString(date) {\n    let d = new Date(date);\n    d.setHours(0, 0, 0, 0);\n    return d.getTime()\n}","import React, {Component} from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\n\nexport class ModalForm extends Component<{ show: any, onHide: () => any }> {\n    render() {\n        return <Modal\n            size=\"lg\"\n            show={this.props.show}\n            onHide={this.props.onHide}\n            aria-labelledby=\"example-modal-sizes-title-lg\"\n        >\n            <Modal.Header closeButton>\n                <Modal.Title id=\"example-modal-sizes-title-lg\">\n                    {this.props.title}\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                {this.props.children}\n            </Modal.Body>\n        </Modal>;\n    }\n}","import React from \"react\";\nimport {Button, Col, Form} from 'react-bootstrap';\nimport {formatDate, range} from \"../utils/utils\";\nimport axios from \"axios\";\nimport {connect} from \"react-redux\";\nimport Container from \"react-bootstrap/Container\";\n\nclass BlockerForm extends React.Component{\n    constructor(props) {\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        const numOfInstances = this.props.blockerToEdit ? this.props.blockerToEdit.startDates.length : 1;\n        this.state = {numOfInstances: numOfInstances}\n\n    }\n\n    getCurrentValue(fieldName){\n        if (this.props.blockerToEdit){\n            const blocker = this.props.blockerToEdit;\n            if (fieldName === 'name') {\n                return blocker['name'];\n            } else if (fieldName === 'participatingClasses') {\n                return blocker['participatingClasses'];\n            } else if (fieldName.startsWith('startDate')){\n                const ind = parseInt(fieldName.replace('startDate', ''));\n                return formatDate(blocker['startDates'][ind]);\n            } else if (fieldName.startsWith('endDate')){\n                const ind = parseInt(fieldName.replace('endDate', ''));\n                return formatDate(blocker['endDates'][ind]);\n            } else if (fieldName.startsWith('startHour')){\n                const ind = parseInt(fieldName.replace('startHour', ''));\n                return blocker['startHours'][ind];\n            } else if (fieldName.startsWith('endHour')){\n                const ind = parseInt(fieldName.replace('endHour', ''));\n                return blocker['endHours'][ind];\n            }\n        } else if (this.props.wantedDates){\n            if (fieldName.startsWith('startDate')) {\n                return this.props.wantedDates.start;\n            } else if (fieldName.startsWith('endDate')) {\n                return this.props.wantedDates.end;\n            }\n        }\n        return [];\n    }\n\n    render() {\n        return (\n            <Container style={{width: \"85%\"}}>\n                {/*<h1>הוספת אילוץ</h1>*/}\n                <Form onSubmit={this.handleSubmit}>\n                    <Form.Row>\n                        <Col md={12}>\n                            <Form.Group>\n                                <Form.Label>שם האילוץ</Form.Label>\n                                <Form.Control required type=\"text\" name=\"name\" maxLength={50}\n                                              placeholder=\"שם האילוץ\" defaultValue={this.getCurrentValue('name')}/>\n\n\n                            </Form.Group>\n                        </Col>\n                    </Form.Row>\n                    <Form.Row>\n                        <Col md={6}>\n                            <Form.Group>\n                                <Form.Label>כיתות משתתפות</Form.Label>\n                                <Form.Control required as=\"select\" multiple name=\"participatingClasses\"\n                                              defaultValue={this.getCurrentValue('participatingClasses')}>\n                                    {this.props.classes.map((s) => (\n                                        <option key={s.id} value={s.id}>{s.name}</option>\n                                    ))}\n\n                                </Form.Control>\n                            </Form.Group>\n                        </Col>\n                        <Col md={6}>\n                            <Form.Group>\n                                <Form.Label>מקצועות משתתפים</Form.Label>\n                                <Form.Control required as=\"select\" multiple name=\"participatingSubjects\"\n                                              defaultValue={this.getCurrentValue('participatingSubjects')}>\n                                    {this.props.subjects.map((s) => (\n                                        <option key={s.id} value={s.id}>{s.name}</option>\n                                    ))}\n\n                                </Form.Control>\n                            </Form.Group>\n                        </Col>\n                    </Form.Row>\n\n                    {range(0, this.state.numOfInstances-1).map(i => {\n                        return (\n                            <Form.Row id={i}>\n                                <Col md={4}>\n                                    <Form.Group>\n                                        {i === 0 && <Form.Label>תאריך התחלה</Form.Label>}\n                                        <Form.Control required type=\"date\" name={\"startDate\" + i.toString()}\n                                                      min={this.props.minDate} max={this.props.maxDate}\n                                                      defaultValue={this.getCurrentValue(\"startDate\" + i.toString())}\n                                        />\n                                    </Form.Group>\n                                </Col>\n                                <Col md={4}>\n                                    <Form.Group>\n                                        {i === 0 && <Form.Label>תאריך סיום</Form.Label>}\n                                        <Form.Control required type=\"date\" name={\"endDate\" + i.toString()}\n                                                      min={this.props.minDate} max={this.props.maxDate}\n                                                      defaultValue={this.getCurrentValue(\"endDate\" + i.toString())}\n                                        />\n                                    </Form.Group>\n                                </Col>\n                                <Col md={2}>\n                                    <Form.Group>\n                                        {i === 0 && <Form.Label>שעת התחלה</Form.Label>}\n                                        <Form.Control required key={i} type=\"number\" name={\"startHour\" + i.toString()}\n                                                      min={this.props.session.startHour} max={this.props.session.endHour}\n                                                      defaultValue={\n                                                          this.props.blockerToEdit ?\n                                                              this.getCurrentValue(\"startHour\" + i.toString()) :\n                                                              this.props.session.startHour\n                                                      }\n                                        />\n                                    </Form.Group>\n                                </Col>\n                                <Col md={2}>\n                                    <Form.Group>\n                                        {i === 0 && <Form.Label>שעת סיום</Form.Label>}\n                                        <Form.Control required key={i} type=\"number\" name={\"endHour\" + i.toString()}\n                                                      min={this.props.startHour} max={this.props.endHour}\n                                                      defaultValue={\n                                                          this.props.blockerToEdit ?\n                                                              this.getCurrentValue(\"endHour\" + i.toString()) :\n                                                              this.props.session.endHour\n                                                      }\n                                        />\n                                    </Form.Group>\n                                </Col>\n                            </Form.Row>\n                        )\n                    })}\n\n\n                    <Form.Row>\n                        <Col md={3}>\n                            <Button onClick={(event) => {\n                                this.setState({numOfInstances: this.state.numOfInstances + 1});\n                            }}>הוסף מועד</Button>\n                        </Col>\n                        <Col md = {3}>\n                            {this.state.numOfInstances > 1 &&\n                            <Button onClick={(event) => {\n                                this.setState({numOfInstances: this.state.numOfInstances - 1})\n                            }}>מחק מועד</Button>}\n                        </Col>\n                    </Form.Row>\n\n\n\n                    <Form.Row>\n                        <Col md={3}>\n                            <Button type=\"Submit\">{this.props.blockerToEdit ? \"עדכן אילוץ\" : \"הוסף אילוץ\"}</Button>\n                        </Col>\n                    </Form.Row>\n                </Form>\n            </Container>\n        )\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        const msg = {\n            session: this.props.session.id,\n            name: e.target.name.value,\n            participatingClasses:  [[...e.target.participatingClasses.options].filter(o => o.selected).map(o => o.value)],\n            participatingSubjects:  [[...e.target.participatingSubjects.options].filter(o => o.selected).map(o => o.value)],\n            startDates: [range(0, this.state.numOfInstances-1)\n                .map( i => e.target['startDate' + i].value)],\n            endDates: [range(0, this.state.numOfInstances-1)\n                .map( i => e.target['endDate' + i].value)],\n            startHours: [range(0, this.state.numOfInstances-1)\n                .map( i => e.target['startHour' + i].value)],\n            endHours: [range(0, this.state.numOfInstances-1)\n                .map( i => e.target['endHour' + i].value)],\n\n        };\n        if (this.props.blockerToEdit){\n            msg['id'] = this.props.blockerToEdit.id;\n        }\n        axios.post(process.env.REACT_APP_API_URL + '/blockers', msg)\n            .catch(function (error) {\n                console.error(error);\n                alert(error);\n            })\n            .then(() => {\n                if (this.props.afterSend){\n                    this.props.afterSend()\n                }\n\n            })\n    }\n\n}\n\nconst mapStateToProps = (state) => ({\n    session: state.session.items,\n    subjects : state.subjects.items,\n    classes : state.classes.items,\n\n    minDate: formatDate(state.session.items.startDate),\n    maxDate: formatDate(state.session.items.endDate),\n\n})\nexport default connect(mapStateToProps)(BlockerForm);","import React from \"react\";\nimport {Button, Col, Form} from 'react-bootstrap';\nimport {formatDate, range} from \"../utils/utils\";\nimport axios from \"axios\";\nimport {connect} from \"react-redux\";\nimport Container from \"react-bootstrap/Container\";\nconst daysInWeek = {\n    0: \"ראשון\",\n    1: \"שני\",\n    2: \"שלישי\",\n    3: \"רביעי\",\n    4: \"חמישי\",\n    5: \"שישי\"\n}\n\nclass TestForm extends React.Component{\n    constructor(props) {\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        const numOfOptionalTimes = this.props.testToEdit ? this.props.testToEdit['optionalDaysInWeek'].length : 1;\n        const numOfTests = this.props.testToEdit ? this.props.testToEdit['numOfTests'] : 1;\n        this.state = {numOfOptionalTimes: numOfOptionalTimes, numOfTests: numOfTests}\n    }\n\n    /*\ndaysGap: 5\ndifficulty: 5\nid: 28\nlabel: null\nmaxDate: \"2019-08-31\"\nminDate: \"2019-08-01\"\nname: \"היסטוריה\"\nnumOfTests: 2\noptionalDaysInWeek: (2) [0, 3]\noptionalEndHours: (2) [9, 9]\noptionalStartHours: (2) [1, 1]\nparticipatingClasses: [21]\nsubject: 29\n\n    */\n\n    getCurrentValue(fieldName){\n        if (this.props.testToEdit){\n            const test = this.props.testToEdit;\n            if (fieldName.startsWith('optionalDaysInWeek')) {\n                const ind = parseInt(fieldName.replace('optionalDaysInWeek', ''));\n                return test['optionalDaysInWeek'][ind];\n            } else if (fieldName.startsWith('optionalEndHours')) {\n                const ind = parseInt(fieldName.replace('optionalEndHours', ''));\n                return test['optionalEndHours'][ind];\n            } else if (fieldName.startsWith('optionalStartHours')) {\n                const ind = parseInt(fieldName.replace('optionalStartHours', ''));\n                return test['optionalStartHours'][ind];\n            } else {\n                return test[fieldName]\n            }\n        }\n    }\n\n    render() {\n        return (\n            <Container style={{width: \"85%\"}}>\n                {/*<h1>הוספת מבחן</h1>*/}\n                <Form onSubmit={this.handleSubmit}>\n                    <Form.Row>\n                        <Col md={6}>\n                            <Form.Group controlId=\"formGridSubject\">\n                                <Form.Label>נושא המבחן</Form.Label>\n                                <Form.Control required as=\"select\" name=\"subject\" defaultValue={this.getCurrentValue('subject')}>\n                                    {this.props.subjects.map((s) => (\n                                        <option key={s.id} value={s.id}>{s.name}</option>\n                                    ))}\n                                </Form.Control>\n                            </Form.Group>\n                            <Form.Group controlId=\"label\">\n                                <Form.Label>תיאור (לא חובה)</Form.Label>\n                                <Form.Control type=\"text\" name=\"label\" defaultValue={this.getCurrentValue('label')}\n                                              placeholder=\"לדוגמא- בגרות פנימית / מתכונת\" maxLength={20}/>\n                            </Form.Group>\n                        </Col>\n                        <Col md={6}>\n                            <Form.Group controlId=\"formGridClasses\" style={{height: \"100%\"}}>\n                                <Form.Label>כיתות משתתפות</Form.Label>\n                                <Form.Control required as=\"select\" multiple name=\"participatingClasses\"\n                                              style={{height: \"80%\"}}\n                                              defaultValue={this.getCurrentValue('participatingClasses')}\n                                >\n                                    {this.props.classes.map((s) => (\n                                        <option key={s.id} value={s.id}>{s.name}</option>\n                                    ))}\n\n                                </Form.Control>\n                            </Form.Group>\n                        </Col>\n                    </Form.Row>\n\n                    <Form.Row>\n                        <Col md={6}>\n                            <Form.Group>\n                                <Form.Label>מספר מבחנים</Form.Label>\n                                <Form.Control required as=\"select\" name=\"numOfTests\" onChange={(e) => {\n                                    this.setState({numOfTests: e.target.value})\n                                }} defaultValue={this.getCurrentValue('numOfTests')}>\n                                    <option value={1}>1</option>\n                                    <option value={2}>2</option>\n                                </Form.Control>\n                            </Form.Group>\n                        </Col>\n                        {this.state.numOfTests > 1 && (\n                            <Col md={6}>\n                                <Form.Group>\n                                    <Form.Label>מרווח מינימלי בין מבחנים</Form.Label>\n                                    <Form.Control required type=\"number\" name=\"daysGap\"\n                                                  defaultValue={\n                                                      this.props.testToEdit ?\n                                                          this.getCurrentValue('daysGap') :\n                                                          this.props.session.defaultGap\n                                                  } step={1}\n                                                  min={2} max={365} //TODO: Change max to the number of days in the interval\n                                    />\n                                </Form.Group>\n                            </Col>\n                        )}\n\n                    </Form.Row>\n                    <Form.Row>\n                        <Col md={6}>\n                            <Form.Group>\n                                <Form.Label>תאריך מינימלי</Form.Label>\n                                <Form.Control required type=\"date\" format=\"DD-MM-YYYY\" name=\"minDate\"\n                                              min={this.props.minDate} max={this.props.maxDate}\n                                              defaultValue={\n                                                  this.props.testToEdit ?\n                                                      this.getCurrentValue('minDate') :\n                                                      this.props.minDate\n                                              }/>\n                            </Form.Group>\n                        </Col>\n                        <Col md={6}>\n                            <Form.Group>\n                                <Form.Label>תאריך מקסימלי</Form.Label>\n                                <Form.Control required type=\"date\" format=\"DD-MM-YYYY\" name=\"maxDate\"\n                                              min={this.props.minDate} max={this.props.maxDate}\n                                              defaultValue={\n                                                  this.props.testToEdit ?\n                                                      this.getCurrentValue('maxDate') :\n                                                      this.props.maxDate\n\n                                              }/>\n                            </Form.Group>\n                        </Col>\n                    </Form.Row>\n\n                    {range(0, this.state.numOfOptionalTimes-1).map(i => {\n                        return (\n                            <Form.Row>\n                                <Col md={4}>\n                                    <Form.Group>\n                                        {i === 0 && <Form.Label>יום</Form.Label>}\n                                        <Form.Control required key={i} as=\"select\"\n                                                      name={\"optionalDaysInWeek\" + i.toString()}\n                                                      defaultValue={this.getCurrentValue(\"optionalDaysInWeek\" + i.toString())}\n                                        >\n                                            {Object.entries(daysInWeek).map(entry => (\n                                                <option value={entry[0]} key={entry[0]}>{entry[1]}</option>\n                                            ))}\n                                        </Form.Control>\n                                    </Form.Group>\n                                </Col>\n                                <Col md={4}>\n                                    <Form.Group>\n                                        {i === 0 && <Form.Label>שעת התחלה</Form.Label>}\n                                        <Form.Control required key={i} type=\"number\" name={\"optionalStartHours\" + i.toString()}\n                                                      defaultValue={\n                                                          this.props.testToEdit ?\n                                                              this.getCurrentValue(\"optionalStartHours\" + i.toString()) :\n                                                              this.props.session.startHour\n                                                      } step={1}\n                                                      min={this.props.session.startHour} max={this.props.session.endHour}\n                                        />\n                                    </Form.Group>\n                                </Col>\n                                <Col md={4}>\n                                    <Form.Group>\n                                        {i === 0 && <Form.Label>שעת סיום</Form.Label>}\n                                        <Form.Control requiredkey={i} type=\"number\" name={\"optionalEndHours\" + i.toString()}\n                                                      step={1} defaultValue={\n                                                          this.props.testToEdit ?\n                                                              this.getCurrentValue(\"optionalEndHours\" + i.toString()) :\n                                                              this.props.session.endHour\n                                                      }\n                                                      min={this.props.session.startHour} max={this.props.session.endHour} //TODO: Change max to the number of days in the interval\n                                        />\n                                    </Form.Group>\n                                </Col>\n                            </Form.Row>\n                        )\n                    })}\n\n                    <Form.Row>\n                        <Col md={3}>\n                            <Button onClick={(event) => {\n                                this.setState({numOfOptionalTimes: this.state.numOfOptionalTimes + 1});\n                            }}>הוסף מועד</Button>\n                        </Col>\n                        <Col md = {3}>\n                            {this.state.numOfOptionalTimes > 1 &&\n                            <Button onClick={(event) => {\n                                this.setState({numOfOptionalTimes: this.state.numOfOptionalTimes - 1})\n                            }}>מחק מועד</Button>}\n                        </Col>\n                    </Form.Row>\n\n                    <Form.Row>\n                        <Col md={3}>\n                            <Button type=\"Submit\">{this.props.testToEdit ? \"עדכן מבחן\" : \"הוסף מבחן\"}</Button>\n                        </Col>\n                    </Form.Row>\n                </Form>\n            </Container>\n        )\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        const msg = {\n            label: e.target.label.value,\n            session: this.props.session.id,\n            subject: e.target.subject.value,\n            participatingClasses:  [[...e.target.participatingClasses.options].filter(o => o.selected).map(o => o.value)],\n            numOfTests: e.target.numOfTests.value,\n            daysGap: this.state.numOfTests > 1 ? e.target.daysGap.value : 0,\n            minDate: e.target.minDate.value,\n            maxDate: e.target.maxDate.value,\n            optionalDaysInWeek: [range(0, this.state.numOfOptionalTimes-1)\n                .map( i => e.target['optionalDaysInWeek' + i].value)],\n            optionalStartHours: [range(0, this.state.numOfOptionalTimes-1)\n                .map( i => e.target['optionalStartHours' + i].value)],\n            optionalEndHours: [range(0, this.state.numOfOptionalTimes-1)\n                .map( i => e.target['optionalEndHours' + i].value)],\n            difficulty: 5, //TODO\n        }\n\n        if (this.props.testToEdit){\n            msg['id'] = this.props.testToEdit.id;\n        }\n\n        axios.post(process.env.REACT_APP_API_URL + '/tests', msg)\n            .catch(function (error) {\n                console.error(error);\n                alert(error);\n            })\n            .then(() => {\n                if (this.props.afterSend){\n                    this.props.afterSend()\n                }\n\n            })\n    }\n\n}\n\nconst mapStateToProps = (state) => ({\n    session : state.session.items,\n    subjects : state.subjects.items,\n    classes : state.classes.items,\n    minDate: formatDate(state.session.items.startDate),\n    maxDate: formatDate(state.session.items.endDate),\n})\nexport default connect(mapStateToProps)(TestForm);\n","import React, {Component} from \"react\";\nimport BigCalendar from \"react-big-calendar\";\nimport moment from \"moment\";\nimport \"./ScheduleCalendar.css\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport \"./react-contextmenu.css\"\nimport Sidebar from \"react-sidebar\";\nimport axios from \"axios\";\n\nimport {connect} from \"react-redux\";\nimport List from \"react-list-select\";\nimport MaterialTitlePanel from \"./material_title_panel\";\nimport {\n    fetchSavedSchedules,\n    fetchScheduledTests,\n    fetchSession,\n    resetSchedule,\n    scheduleTest,\n    unscheduleTest\n} from \"../../actions\";\nimport {daysBetween, formatDate, groupBy, isEmpty, longestCommonStartingSubstring, Sleep} from \"../../utils/utils\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faEraser, faLock, faPlus, faRobot, faSave} from \"@fortawesome/free-solid-svg-icons\";\nimport {Event, parseDateString, styles} from \"./helpers\";\nimport {ModalForm} from \"../ModalForm\";\nimport AddBlockers from \"../BlockerForm\";\nimport AddTests from \"../TestForm\";\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\nimport Dropdown from \"react-bootstrap/Dropdown\";\nimport Button from \"react-bootstrap/Button\";\nimport ButtonToolbar from \"react-bootstrap/ButtonToolbar\";\nimport {ContextMenu, ContextMenuTrigger, MenuItem} from \"react-contextmenu\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Card from \"react-bootstrap/Card\";\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\n\nconst localizer = BigCalendar.momentLocalizer(moment);\n\n\n\nclass ScheduleCalendar extends Component {\n\n    constructor(props) {\n        super(props);\n        this.props.dispatch(fetchSession());\n\n        this.state = {\n            optionalDays: [],\n            selectedTestId: null,\n            scheduledTests: [],\n            testEvents: [],\n            filteredClassOnSchedule: null,\n            modalFormData: {\n                type: null,\n                props: null\n            },\n            blockerModalShow: false, testModalShow: false\n        };\n        this.customDayPropGetter = this.customDayPropGetter.bind(this)\n        this.SidebarContent = this.SidebarContent.bind(this)\n        this.closeModals = this.closeModals.bind(this)\n\n    }\n\n\n    closeModals() {\n        this.setState({blockerModalShow: false, testModalShow: false})\n        this.setState({modalFormData: {\n                type: null,\n                props: null\n            }})\n        this.props.dispatch(fetchSession())\n    }\n\n    fetch_delete(endPoint, id) {\n        fetch(process.env.REACT_APP_API_URL + endPoint, {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({id: id})\n        })\n            .catch(console.error)\n            // .then(() => Sleep(300))\n            .then(() => (this.props.dispatch(fetchSession())));\n    }\n\n    SidebarContent = props => {\n        const style = props.style\n            ? { ...styles.sidebar, ...props.style }\n            : styles.sidebar;\n\n        let subjectsDiv = []\n\n\n        const testsGroupedBySubject = groupBy(props.testsToSchedule, info => info.test.subject);\n        const subjectIdsSortedList = isEmpty(this.props.subjectsDict) ? [] : Object.keys(testsGroupedBySubject).sort(\n            (a, b) => this.props.subjectsDict[a].name > this.props.subjectsDict[b].name ? 1 : -1\n        );\n        subjectIdsSortedList.forEach(subjectId => {\n            let test_div = [];\n            let test_div_ids = [];\n            const testsOfSubject = testsGroupedBySubject[subjectId];\n\n            testsOfSubject.forEach(info => {\n                const test = info.test;\n                test_div_ids.push(test.id);\n                const numOfOptionalDates = info.optionalDates.length;\n                const color = numOfOptionalDates > 0 ? 'blue' : 'red';\n                test_div.push(\n                    (<div className=\"test\">\n                        <ContextMenuTrigger id={\"test\" + test.id.toString()}>\n                            <div className=\"name\">\n                                <span style={{color: color}}>[{numOfOptionalDates}]</span>\n                                {test.name} - ({info.howManyLeft} מתוך {test.numOfTests})\n                            </div>\n                            <div className=\"classes\">\n                                {test.participatingClasses.map(cls => {\n                                    return props.classesDict[cls] ? props.classesDict[cls].name : '';\n                                }).join(', ')}\n                            </div>\n                        </ContextMenuTrigger>\n                    </div>)\n                )\n            });\n\n            let selectedTestIndInList = test_div_ids.indexOf(this.state.selectedTestId)\n            let list = (\n                <List\n                    items={test_div}\n                    selected={[selectedTestIndInList]}\n                    disabled={[]}\n                    multiple={false}\n                    onChange={(selected) => {\n                        this.setState({\n                            selectedTestId: test_div_ids[selected],\n                        })\n                        fetch(process.env.REACT_APP_API_URL + '/finddate?' +\n                            'testid='+test_div_ids[selected].toString()\n                        )\n                            .then(response => response.json())\n                            .then(res => {\n                                const days = res.map(date => {\n                                    return parseDateString(date);\n                                });\n                                this.setState({\n                                    optionalDays: days\n                                });\n                                if (res.length === 0){\n                                    window.alert('לא נותרו תאריכים אפשריים למבחן זה')\n                                }\n\n                            })\n                            .catch(console.error)\n                    }}\n                />)\n\n            subjectsDiv.push(\n                <Card>\n                    <Accordion.Toggle as={Card.Header} eventKey={subjectId}>\n                        {this.props.subjectsDict[subjectId] ? this.props.subjectsDict[subjectId].name : ''}\n                    </Accordion.Toggle>\n                    <Accordion.Collapse eventKey={subjectId}>\n                        <Card.Body style={{padding: 0}}>{list}</Card.Body>\n                    </Accordion.Collapse>\n                </Card>\n            )\n        })\n\n        return (\n            <MaterialTitlePanel title={\n                <>\n                    <div>\n                    <span style={{margin: '15px'}}>\n                        <FontAwesomeIcon icon={faSave} onClick={() => {\n                            const name = prompt('בחר שם:')\n                            if (name.length > 0){\n                                axios.post(\n                                    process.env.REACT_APP_API_URL + '/schedulerstatestore',\n                                    {name}\n                                )\n                                // .then(() => Sleep(500))\n                                    .then(this.props.dispatch(fetchSavedSchedules()))\n                                    .catch(console.error)\n                            }\n                        }}/>\n                    </span>\n                        <span style={{margin: '15px'}}><FontAwesomeIcon icon={faEraser} onClick={()=>{this.props.dispatch(resetSchedule())}}/></span>\n                        <span style={{margin: '15px'}}>\n                        <FontAwesomeIcon icon={faRobot} onClick={()=>{\n                            // const interval = setInterval(() => this.props.dispatch(fetchScheduledTests()), 300);\n                            fetch(process.env.REACT_APP_API_URL + '/runscheduler')\n                                .then(() => {\n                                    Sleep(300);\n                                    this.props.dispatch(fetchScheduledTests())\n                                })\n                                .catch(console.error)\n                        }}/>\n                    </span>\n                        <span style={{margin: '15px'}}>\n                        <FontAwesomeIcon icon={faPlus} onClick={() => this.showTestForm()}/>\n                    </span>\n                        <span style={{margin: '15px'}}>\n                        <FontAwesomeIcon icon={faLock} onClick={() => this.showBlockerForm()}/>\n                    </span>\n                    </div>\n                </>\n\n            } style={style}>\n                <ModalForm title=\"הוסף אילוץ\"\n                           show={this.state.modalFormData.type === \"blocker\"}\n                           onHide={this.closeModals}>\n                    <AddBlockers afterSend={this.closeModals} {...this.state.modalFormData.props}/>\n                </ModalForm>\n                <ModalForm title=\"הוסף מבחן\"\n                           show={this.state.modalFormData.type === \"test\"}\n                           onHide={this.closeModals}>\n                    <AddTests afterSend={this.closeModals} {...this.state.modalFormData.props}/>\n                </ModalForm>\n\n\n                <div>\n                    <Accordion>\n                        {subjectsDiv}\n                    </Accordion>\n\n                </div>\n            </MaterialTitlePanel>\n        );\n    };\n\n    customDayPropGetter(date) {\n        if (this.state.optionalDays.includes(date.getTime())){\n            return {\n                className: 'special-day',\n                style: {\n                    border: 'solid 3px #afa',\n                },\n            }\n\n        }\n        else return {}\n    }\n\n\n\n    render() {\n        const sidebar = <this.SidebarContent testsToSchedule={this.props.testsToSchedule} classesDict={this.props.classesDict}/>;\n        const sidebarProps = {\n            sidebar,\n            docked: true,\n            sidebarClassName: \"custom-sidebar-class\",\n            contentId: \"custom-sidebar-content-id\",\n            open: true,\n            touch: true,\n            shadow: false,\n            pullRight: true,\n            transitions: true,\n        };\n        const startDate = moment(this.props.session.startDate);\n        const endDate = moment(this.props.session.endDate);\n\n        const result = [];\n\n        if (endDate.isBefore(startDate)) {\n            throw \"End date must be greater than start date.\"\n        }\n\n        while (startDate.isBefore(endDate)) {\n            result.push(startDate.format(\"YYYY-MM-01\"));\n            startDate.add(1, 'month');\n        }\n        // console.log(result)\n        const calendarsBody = result.map(date => (\n            <div style={styles.content}>\n                {this.getBigCalendar(new Date(date))}\n            </div>\n        ));\n\n        const ref = React.createRef();\n        const options = {\n            orientation: 'landscape',\n            unit: 'px',\n            format: [3508, 2480]\n        };\n\n\n        return (\n            <>\n                <Sidebar {...sidebarProps} styles={{root: {margin: '0 15px'}}} >\n                    <MaterialTitlePanel title={\n                        <div>\n                            <span>רמת קושי: {this.props.scheduleDifficulty}</span>\n                            <ButtonToolbar>\n                                <DropdownButton id=\"dropdown-basic-button\"\n                                                variant=\"secondary\" title=\"עבור ללוח שמור\">\n                                    {this.props.savedSchedules.map(savedSchedule => {\n                                        const daysPassed = daysBetween(new Date(), new Date(savedSchedule.dateSaved));\n                                        return (\n                                            <Dropdown.Item onSelect={() => (\n                                                this.props.dispatch(\n                                                    fetchScheduledTests('?storeid=' + savedSchedule.storeid)\n                                                )\n                                            )}>{savedSchedule.name + \" - \" }\n                                                <em>{\"נשמר לפני \" + `${daysPassed}` + ' ימים'}</em>\n                                            </Dropdown.Item>\n                                        );\n                                    })}\n                                </DropdownButton>\n                                <Button onClick={() => {\n                                    fetch(process.env.REACT_APP_API_URL + '/debug').then(r =>\n                                        this.props.dispatch(fetchScheduledTests()))\n                                }}>שפר שיבוצים</Button>\n                                <Button onClick={() => {\n                                    this.props.history.push(\"/selectsession\")\n                                }}>בחר לוח שנה אחר</Button>\n\n                            </ButtonToolbar>\n                        </div>\n                    }>\n                        <Tabs defaultActiveKey=\"all\" id=\"classesFilterTabs\" onSelect={key => {\n                            if (key === \"all\"){\n                                this.setState({filteredClassOnSchedule: null})\n                            } else {\n                                this.setState({filteredClassOnSchedule: parseInt(key)})\n                            }\n                        }}>\n                            <Tab eventKey=\"all\" title=\"כל הכיתות\"/>\n                            {this.props.classes.map(cls => {\n                                return (\n                                    <Tab eventKey={cls.id} title={cls.name}/>\n                                );\n                            })}\n                        </Tabs>\n                        {calendarsBody}\n                    </MaterialTitlePanel>\n\n                </Sidebar>\n                {\n                    this.props.tests.filter(test => test.id).map(test => (\n                        <ContextMenu id={\"test\" + test.id.toString()} rtl>\n                            <MenuItem onClick={() => this.showTestForm({\n                                testToEdit: this.props.testsDict[test.id]\n                            })}>\n                                <div>ערוך</div>\n                            </MenuItem>\n                            {/*<MenuItem onClick={console.log}>*/}\n                            {/*    נעל*/}\n                            {/*</MenuItem>*/}\n                            <MenuItem onClick={() => this.fetch_delete('/tests', test.id)}>\n                                מחק\n                            </MenuItem>\n                            {/*<MenuItem divider />*/}\n                        </ContextMenu>\n                    ))}\n                {\n                    this.props.blockers.map(blocker => (\n                        <ContextMenu id={\"blocker\" + blocker.id.toString()} rtl>\n                            <MenuItem onClick={() => this.showBlockerForm({\n                                blockerToEdit: this.props.blockersDict[blocker.id]\n                            })}>\n                                <div>ערוך</div>\n                            </MenuItem>\n                            <MenuItem onClick={() => this.fetch_delete('/blockers', blocker.id)}>\n                                מחק\n                            </MenuItem>\n                            {/*<MenuItem divider />*/}\n                        </ContextMenu>\n                    ))\n                }\n            </>\n        );\n    }\n\n    getBigCalendar(defaultDate) {\n        return <BigCalendar\n            popup\n            selectable\n            localizer={localizer}\n            defaultDate={defaultDate}\n            defaultView=\"month\"\n            views={{month: true}}\n            events={[\n                ...this.props.blockerEvents.filter(\n                    e => this.state.filteredClassOnSchedule === null ||\n                        e.blocker.participatingClasses.includes(this.state.filteredClassOnSchedule)\n                ),\n                ...this.props.testEvents.filter(\n                    e => this.state.filteredClassOnSchedule === null ||\n                        e.test.participatingClasses.includes(this.state.filteredClassOnSchedule)\n                )]}\n            style={{height: \"500px\"}}\n            startAccessor=\"start\"\n            endAccessor=\"end\"\n            onSelectEvent={(event, e) => {\n                if (event.type === 'test') {\n                    let date = event.start;\n                    date.setHours(0, 0, 0, 0);\n                    this.props.dispatch(unscheduleTest(event.id, date))\n                    this.setState({\n                        selectedTestId: null,\n                        optionalDays: []\n                    })\n                }\n            }}\n            onSelectSlot={(slotInfo) => {\n                if (this.state.selectedTestId !== null){\n                    const isAnOption = this.state.optionalDays.includes(parseDateString(slotInfo['start']));\n                    if (isAnOption) {\n                        this.props.dispatch(scheduleTest(this.state.selectedTestId, slotInfo.start))\n\n                        this.setState({\n                            selectedTestId: null,\n                            optionalDays: []\n                        })\n\n                    }\n                }\n                else {\n                    this.showBlockerForm({\n                        wantedDates: {\n                            start: formatDate(slotInfo.start),\n                            end: formatDate(slotInfo.end)\n                        }\n                    })\n                }\n            }}\n            components={{\n                event: Event\n            }}\n            dayPropGetter={this.customDayPropGetter}\n            rtl={true}\n\n        />;\n    }\n\n    showTestForm(testFormProps = null) {\n        this.setState({modalFormData: {\n                type: 'test',\n                props: testFormProps\n            }})\n    }\n\n    showBlockerForm(blockerFormProps = null) {\n        this.setState({modalFormData: {\n                type: 'blocker',\n                props: blockerFormProps\n            }})\n    }\n}\n\nconst mapStateToProps = (state) => {\n    let classesDict = state.classes.items.reduce((o, cur) => ({...o, [cur.id]: cur}), {});\n    let testsDict = state.tests.items.reduce((o, cur) => ({...o, [cur.id]: cur}), {});\n    let blockersDict = state.blockers.items.reduce((o, cur) => ({...o, [cur.id]: cur}), {});\n    let subjectsDict = state.subjects.items.reduce((o, cur) => ({...o, [cur.id]: cur}), {});\n    return ({\n        session: state.session.items,\n        subjects: state.subjects.items,\n        classes: state.classes.items,\n        blockers: state.blockers.items,\n        tests: state.tests.items,\n        classesDict,\n        testsDict,\n        blockersDict,\n        subjectsDict,\n        scheduleDifficulty: state.schedule.difficulty,\n        scheduledTests: state.schedule.scheduledTests,\n        savedSchedules: state.savedSchedules.items,\n        testsToSchedule: state.tests.items.map(\n            test => {\n                const alreadyScheduledCount = state.schedule.scheduledTests.filter(st => st.id === test.id).length;\n                const howManyNeeded = test.numOfTests;\n                if (howManyNeeded > alreadyScheduledCount){\n\n                    let unscheduledTestsOption = state.schedule.unscheduledTestsOptions[test.id];\n                    unscheduledTestsOption = unscheduledTestsOption ? unscheduledTestsOption : [];\n                    return {\n                        test: test,\n                        howManyLeft: howManyNeeded - alreadyScheduledCount,\n                        optionalDates: unscheduledTestsOption.map(parseDateString)\n                    }\n                }\n                else {\n                    return null;\n                }\n            }\n        ).filter(i => i != null),\n        blockerEvents:\n            state.blockers.items\n            // .filter(blocker => )\n                .reduce((ar, blocker) => {\n                    ar = [...ar,\n                        ...blocker.startDates.map((_, i) => ({\n                            title: blocker.name,\n                            start: new Date(blocker.startDates[i]),\n                            end: new Date(blocker.endDates[i]),\n                            type: 'blocker',\n                            id: blocker.id,\n                            blocker: blocker\n                        }))\n                    ];\n                    return ar;\n                }, []),\n        testEvents:\n            state.schedule.scheduledTests\n                .filter(info => testsDict[info.id])\n                .map(scheduledTestInfo => {\n                    const id = scheduledTestInfo.id;\n                    const date = scheduledTestInfo.date;\n                    if (isEmpty(testsDict)){\n                        return []\n                    }\n                    const scheduledTest = testsDict[id];\n                    const testName = scheduledTest ? scheduledTest.name : '';\n                    const commonStartingSubstringInClassNames = longestCommonStartingSubstring(\n                        state.classes.items.map(cls => cls.name)\n                    )\n                    return {\n                        title: testName + ' (' + scheduledTest.participatingClasses.map(cls => {\n                            return classesDict[cls] ?\n                                classesDict[cls].name.replace(commonStartingSubstringInClassNames,'') : '';\n                        }).join(', ') + ')',\n                        start: new Date(date),\n                        end: new Date(date),\n                        type: 'test',\n                        id: id,\n                        test: scheduledTest\n                    }\n                })\n    });\n}\n\nexport default connect(mapStateToProps)(ScheduleCalendar);","import React, {Component, Suspense} from \"react\";\nimport {DisplayRemoteData, sortByName} from \"../../utils/utils\";\n\nclass ApiList extends Component<{ parserFunction: (s?: any) => any }> {\n    render() {\n        return <div>\n            <h1>{this.props.name}</h1>\n            <ul>\n                <Suspense fallback={<li></li>}>\n                    <DisplayRemoteData\n                        url={this.props.url}\n                        preProcess={sortByName}\n                        parserFunction={(s) => (\n                            <div>\n                                <li>{s.name}</li>\n\n                                <ul>\n                                    {Object.entries(s).map(i => (\n                                        i[0] !== \"name\" && <li>{i[0]} : {i[1]}</li>\n                                    ))}\n                                </ul>\n                            </div>\n                        )}/>\n                </Suspense>\n            </ul>\n        </div>;\n    }\n}\n\nexport default function Home() {\n    return (\n        <div>\n            <ApiList name=\"סשנים\" url={process.env.REACT_APP_API_URL + \"/sessionslist\"}/>\n        </div>\n    )\n}","import React from \"react\";\nimport axios from 'axios/index';\nimport Button from 'react-bootstrap/Button';\nimport Container from 'react-bootstrap/Container';\nimport { connect } from 'react-redux'\nimport Form from \"react-bootstrap/Form\";\nimport Col from \"react-bootstrap/Col\";\n// import Accordion from \"react-bootstrap/Accordion\";\nimport Card from \"react-bootstrap/Card\";\nimport {fetchSession} from \"../actions\";\n\nclass SetupSession extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            subjects: ['קוסמות', 'שיקויים'], classes: ['א1', 'א2'],\n            defaults: {\n                sessionName: '',\n                minDate: '2019-01-01', maxDate: '2019-05-01', daysGap: 30, numOfHours: 1, isZeroHour: false\n            }\n        };\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name;\n\n        this.setState({\n            defaults: {...this.state.defaults, [name]: value}\n        });\n    }\n\n    sendSession = (e) => {\n        e.preventDefault();\n        const msg = {\n            subjects: [this.state.subjects],\n            classes: [this.state.classes],\n            ...this.state.defaults\n        }\n        axios.post(process.env.REACT_APP_API_URL + '/initsession', msg)\n            .then(res => res.data)\n            .then(res => this.props.dispatch(fetchSession(res.session)))\n            .then(() => this.props.history.push('/subjects'))\n            .catch(console.error);\n    }\n\n\n    render(){\n        const DefaultsForm = <Form>\n            <Form.Row>\n                <Col md={12}>\n                    <Form.Group>\n                        <Form.Label>כינוי</Form.Label>\n                        <Form.Control type=\"text\" required\n                                      value={this.state.sessionName} name=\"sessionName\"\n                                      onChange={this.handleInputChange}\n                                      maxLength={100}\n                        />\n                    </Form.Group>\n                </Col>\n                <Col md={6}>\n                    <Form.Group>\n                        <Form.Label>תאריך התחלה</Form.Label>\n                        <Form.Control required type=\"date\"\n                                      value={this.state.defaults.minDate} name=\"minDate\"\n                                      onChange={this.handleInputChange}\n                        />\n                    </Form.Group>\n                </Col>\n                <Col md={6}>\n                    <Form.Group>\n                        <Form.Label>תאריך סיום</Form.Label>\n                        <Form.Control required type=\"date\" value={this.state.defaults.maxDate} name=\"maxDate\"\n                                      onChange={this.handleInputChange}\n                        />\n                    </Form.Group>\n                </Col>\n            </Form.Row>\n            <Form.Row>\n                <Col md={6}>\n                    <Form.Group >\n                        <Form.Label>מרווח מינימלי בין מבחנים באותו המקצוע</Form.Label>\n                        <Form.Control required type=\"number\" name=\"daysGap\" value={this.state.defaults.daysGap}\n                                      step={1}\n                                      min={2} max={365} //TODO: Change max to the number of days in the interval\n                                      onChange={this.handleInputChange}\n                        />\n                    </Form.Group>\n                </Col>\n            </Form.Row>\n            <Form.Row>\n                <Col md={6}>\n                    <Form.Group>\n                        <Form.Label>מספר שעות ביום</Form.Label>\n                        <Form.Control required type=\"number\" name=\"numOfHours\"\n                                      value={this.state.defaults.numOfHours} min={1}\n                                      onChange={this.handleInputChange}\n                        />\n                    </Form.Group>\n                </Col>\n            </Form.Row>\n            <Form.Row>\n                <Col md={6}>\n                    <Form.Group>\n                        <Form.Check name=\"isZeroHour\" type=\"checkbox\" checked={this.state.defaults.isZeroHour}\n                                    label=\"יש שעת אפס\"\n                                    onChange={this.handleInputChange}\n                        />\n                    </Form.Group>\n                </Col>\n\n\n            </Form.Row>\n        </Form>;\n        return(\n            <Container style={{width: \"70%\"}}>\n                <h1>הגדרות</h1>\n                <Card>\n                    <h2>הגדרות כלליות</h2>\n                    <Card.Body>\n                        {DefaultsForm}\n                    </Card.Body>\n                </Card>\n                <Card>\n                    <h2>כיתות</h2>\n                    <Card.Body>\n                        <List title=\"כיתות\" sendText=\"הוסף כיתה\" maxInputLength={5}\n                              setParentList={list => this.setState({classes: list})}/>\n                    </Card.Body>\n                </Card>\n                <Card>\n                    <h2>מקצועות</h2>\n                    <Card.Body>\n                        <List title=\"מקצועות\" sendText=\"הוסף מקצוע\" maxInputLength={20}\n                              setParentList={list => this.setState({subjects: list})}/>\n                    </Card.Body>\n                </Card>\n                <Button onClick={this.sendSession}>שמור והמשך להגדרת אשכלות</Button>\n\n\n            </Container>\n        )\n    }\n}\n\nclass List extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {text: '', list:[]};\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    componentDidMount() {\n        // this.props.dispatch(fetchSubjects);\n    }\n\n\n    render() {\n        return (\n            <div>\n                {/*<h2>{this.props.title}</h2>*/}\n                <ul>\n                    {this.state.list.map((item, idx) => {\n                        return <li key={`item-${idx}`}>{item}</li>\n                    })}\n                </ul>\n                <form>\n                    <input\n                        maxLength={this.props.maxInputLength ? this.props.maxInputLength : 100}\n                        id=\"new-todo\"\n                        onChange={this.handleChange}\n                        value={this.state.text}\n                    />\n                    <Button type=\"submit\" onClick={this.handleSubmit}>\n                        {this.props.sendText}\n                    </Button>\n                </form>\n            </div>\n        )\n    }\n\n    handleChange(e) {\n        this.setState({ text: e.target.value });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        if (!this.state.text.length) {\n            return;\n        }\n        const newList = [...this.state.list, this.state.text]\n        this.setState({list: newList})\n        this.props.setParentList(newList)\n        this.setState(() => ({\n            text: ''\n        }));\n\n\n    }\n\n}\n\nconst mapStateToProps = (state) => ({\n    // subjects : state.subjects.items\n})\n\nexport default connect(mapStateToProps)(SetupSession);","import React, {Component} from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport {Link} from \"react-router-dom\";\nimport {fetchSession} from \"../../actions\";\nimport axios from \"axios\";\n\nfunction sendSelectSession(sessionId){\n    const msg = {session: sessionId}\n    return axios.post(process.env.REACT_APP_API_URL + '/selectsession', msg)\n        .catch(console.error)\n}\n\n\nexport class SessionCard extends Component<{}> {\n    render() {\n        const session = this.props.session;\n        return <div>\n            <Card style={{width: \"30%\"}}>\n                <Card.Body>\n                    <Card.Title>{session.info.name}</Card.Title>\n                    {/*<Card.Subtitle className=\"mb-2 text-muted\">Card Subtitle</Card.Subtitle>*/}\n                    <Card.Text>\n                        <strong>כיתות: </strong>\n                        {session.classes.map(cls => cls.name).join(', ')}\n                    </Card.Text>\n                    <Card.Text>\n                        <strong>מקצועות: </strong>\n                        {session.subjects.map(cls => cls.name).join(', ')}\n                    </Card.Text>\n                    <Card.Text>\n                        {/*<strong>מקצועות: </strong>*/}\n                        מתחיל ב- {new Date(session.info.startDate).toLocaleDateString('he-IL')}\n                        &nbsp;\n                        ונגמר ב- {new Date(session.info.endDate).toLocaleDateString('he-IL')}\n                    </Card.Text>\n                    <Card.Text style={{color: 'red'}}>\n                        להוסיף גם שעות ומרווח\n                    </Card.Text>\n                    <Card.Text>\n                        <Link to='/calendar' onClick={() => {\n                            sendSelectSession(session.info.id)\n                                .then(() => this.props.dispatch(fetchSession()))\n                        }}>\n                            בחר לוח מבחנים\n                        </Link>\n                    </Card.Text>\n                    <Card.Text>\n                        <Link to=\"#\">\n                            שכפל וערוך\n                        </Link>\n                    </Card.Text>\n                </Card.Body>\n            </Card>\n        </div>;\n    }\n}","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"react-bootstrap/Button\";\nimport {SessionCard} from \"./Cards/SessionCard\";\n\n\nclass SelectSession extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            sessions: []\n        };\n        fetch(process.env.REACT_APP_API_URL + '/sessionslist')\n            .then(res => res.json())\n            // .then(console.log)\n            .then(sessions => this.setState({sessions: sessions}))\n        // .then(sessions => sessions.map(sess => ))\n    }\n\n    render() {\n        return (\n            <Container>\n                <div>\n                    <Button variant=\"primary\" size=\"lg\" active\n                            onClick={()=>this.props.history.push(\"/sessionsetup\")}\n                    >\n                        צור לוח מבחנים חדש\n                    </Button>\n                </div>\n                <div>\n                    או המשך עבודה על לוח קיים\n                </div>\n                <div>\n                {this.state.sessions.map(sess => <SessionCard dispatch={this.props.dispatch} key={sess.info.id} session={sess}/>)}\n                </div>\n            </Container>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    // subjects : state.subjects.items\n})\n\nexport default connect(mapStateToProps)(SelectSession);","import React, {Component} from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport {connect} from \"react-redux\";\nimport AddBlockers from \"./BlockerForm\";\nimport AddTests from \"./TestForm\";\nimport {fetchSession} from \"../actions\";\nimport ScheduleCalendar from \"./ScheduleCalendar/ScheduleCalendar\";\nimport {ModalForm} from \"./ModalForm\";\n\nclass SessionHome extends Component {\n    constructor(props){\n        super(props);\n        console.warn('REMOVE HARD CODED ID');\n        this.props.dispatch(fetchSession()); //FIXME\n\n\n        this.state = {blockerModalShow: false, testModalShow: false}\n        this.closeModals = this.closeModals.bind(this)\n    }\n\n    closeModals() {\n        this.setState({blockerModalShow: false, testModalShow: false})\n        this.props.dispatch(fetchSession())\n    }\n\n\n    render() {\n        // if (this.props.session.length){\n        //     console.log('hey')\n        //     this.props.history.push('/selectsession')\n        // }\n        return (\n            <div>\n                <h1>{this.props.session.name}</h1>\n\n                <ModalForm title=\"הוסף אילוץ\"\n                           show={this.state.blockerModalShow}\n                           onHide={this.closeModals}>\n                    <AddBlockers afterSend={this.closeModals}/>\n                </ModalForm>\n                <ModalForm title=\"הוסף מבחן\"\n                           show={this.state.testModalShow}\n                           onHide={this.closeModals}>\n                    <AddTests afterSend={this.closeModals}/>\n                </ModalForm>\n\n                <div>\n                    <Button variant=\"primary\" onClick={() => this.setState({blockerModalShow: true})}>\n                        הוסף אילוץ</Button>\n                    <Button variant=\"primary\" onClick={() => this.setState({testModalShow: true})}>\n                        הוסף מבחן</Button>\n                </div>\n                {/*<h2>מבחנים</h2>*/}\n                {/*<div style={{marginRight: '5px'}}>*/}\n                {/*    {sortByName(this.props.tests).map(test => (*/}\n                {/*        <div>*/}\n                {/*            <h4>{test.name} </h4>*/}\n                {/*            <ul style={{marginRight: '10px'}}>*/}\n                {/*                <li><strong>כיתות: </strong>*/}\n                {/*                    {test.participatingClasses.map(cls => {*/}\n                {/*                        return this.props.classesDict[cls] ?*/}\n                {/*                            this.props.classesDict[cls].name : '';*/}\n                {/*                    }).join(', ')}*/}\n                {/*                </li>*/}\n                {/*            </ul>*/}\n                {/*        </div>*/}\n                {/*    ))}*/}\n                {/*</div>*/}\n\n                {/*<h2>אילוצים</h2>*/}\n                {/*<div style={{marginRight: '5px'}}>*/}\n                {/*    {sortByName(this.props.blockers).map(blocker => (*/}\n                {/*        <div>*/}\n                {/*            <h4>{blocker.name} </h4>*/}\n                {/*            <ul style={{marginRight: '10px'}}>*/}\n                {/*                <li><strong>כיתות: </strong>*/}\n                {/*                    {blocker.participatingClasses.map(cls => {*/}\n                {/*                        return this.props.classesDict[cls] ?*/}\n                {/*                            this.props.classesDict[cls].name : '';*/}\n                {/*                    }).join(', ')}*/}\n                {/*                </li>*/}\n\n                {/*            </ul>*/}\n                {/*        </div>*/}\n                {/*    ))}*/}\n                {/*</div>*/}\n                <ScheduleCalendar session={this.props.session}/>\n\n\n\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = (state) => {\n    let classesDict = state.classes.items.reduce((o, cur) => ({...o, [cur.id]: cur}), {});\n    let testsDict = state.tests.items.reduce((o, cur) => ({...o, [cur.id]: cur}), {});\n    return ({\n        session: state.session.items,\n        subjects: state.subjects.items,\n        classes: state.classes.items,\n        blockers: state.blockers.items,\n        tests: state.tests.items,\n        classesDict: classesDict,\n        testsDict: testsDict,\n    });\n}\n\n\n\n\nexport default connect(mapStateToProps)(SessionHome)","import React, {Component} from \"react\";\nimport { connect } from 'react-redux'\nimport {HashRouter, Switch, Route, Link} from \"react-router-dom\";\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport Container from 'react-bootstrap/Container'\nimport './App.css'\nimport Subjects from \"../Subjects/Subjects\";\nimport ScheduleCalendar from \"../ScheduleCalendar/ScheduleCalendar\";\nimport AddTests from \"../TestForm\";\nimport Home from \"../Home/Home\";\nimport PropTypes from \"prop-types\";\nimport AddBlockers from \"../BlockerForm\";\nimport SessionSetup from \"../SetupSession\";\nimport SelectSession from \"../SelectSession\";\nimport SessionHome from \"../SessionHome\";\n\nclass NavRouterLink extends Component<{}> {\n    render() {\n        return <Link to={this.props.to}><Nav.Item className=\"nav-link\">{this.props.children}</Nav.Item></Link>;\n    }\n}\n\nclass AsyncApp extends Component{\n    componentDidMount(): void {\n    }\n\n    render() {\n        return(\n            <Container>\n                <HashRouter basename={'/'}>\n                    <div style={{alignItems: \"\"}}>\n                        <li><Link to=\"/\">Home</Link></li>\n                        <li><Link to=\"/selectsession\">selectsession</Link></li>\n                        {/*<nav>*/}\n                        {/*    <Navbar bg=\"light\" variant=\"light\">*/}\n                        {/*        <Navbar.Brand href=\"/selectsession\">החלף לוח מבחנים</Navbar.Brand>*/}\n                        {/*        <Nav className=\"mr-auto\">*/}\n                        {/*            <NavRouterLink to=\"/session\">סשן</NavRouterLink>*/}\n                        {/*            <NavRouterLink to=\"/addtests\">הגדרת מבחנים</NavRouterLink>*/}\n                        {/*            <NavRouterLink to=\"/addblockers\">הגדרת אילוצים</NavRouterLink>*/}\n                        {/*            <NavRouterLink to=\"/calendar\">שיבוצים</NavRouterLink>*/}\n                        {/*        </Nav>*/}\n                        {/*    </Navbar>*/}\n                        {/*</nav>*/}\n                        <hr />\n                        <Switch>\n                            <Route exact path=\"/\" component={SelectSession}/>\n                            <Route path=\"/home\" component={Home}/>\n                            <Route path=\"/subjects\" component={Subjects}/>\n                            <Route path=\"/calendar\" component={ScheduleCalendar}/>\n                            <Route path=\"/addtests\" component={AddTests}/>\n                            <Route path=\"/addblockers\" component={AddBlockers}/>\n                            <Route path=\"/sessionsetup\" component={SessionSetup}/>\n                            <Route path=\"/selectsession\" component={SelectSession}/>\n                            <Route path=\"/session\" component={SessionHome}/>\n                            <Route component={() => (<div>404 Not found </div>)} />\n                        </Switch>\n                    </div>\n                </HashRouter>\n\n            </Container>\n        )\n    }\n}\n\nAsyncApp.propTypes = {\n    items: PropTypes.array.isRequired,\n    isFetching: PropTypes.bool.isRequired,\n    dispatch: PropTypes.func.isRequired\n}\n\nfunction mapStateToProps(state) {\n    const { subjects, session } = state\n    const { isFetching, items } = subjects\n    return {\n        session,\n        items,\n        isFetching,\n    }\n}\n\n\nexport default connect(mapStateToProps)(AsyncApp)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. ScheduleCalendar is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from 'redux'\nimport {\n    // INIT_SESSION,\n    RECEIVE,\n    REQUEST,\n    SCHEDULE,\n    UNSCHEDULE\n} from \"../actions\";\n\nfunction ReducerCreator(name){\n    return function (\n        state = {\n            isFetching: false,\n            items: []\n        },\n        action\n    ) {\n        switch (action.type) {\n            case REQUEST + '_' + name.toUpperCase():\n                return Object.assign({}, state, {\n                    isFetching: true,\n                })\n            case RECEIVE + '_' + name.toUpperCase():\n                return Object.assign({}, state, {\n                    isFetching: false,\n                    items: action.items,\n                    lastUpdated: action.receivedAt\n                })\n            default:\n                return state\n        }\n    }\n\n}\n\nfunction schedulerState (\n    state = {\n        isFetching: false,\n        scheduledTests: [],\n        unscheduledTestsOptions: {},\n        difficulty: 0,\n        horizon: true\n    },\n    action\n)\n{\n    // console.log(action);\n    switch (action.type) {\n        // case SCHEDULE:\n        //     return Object.assign({}, state, {\n        //         scheduledTests: [\n        //             ...state.scheduledTests,\n        //             {id: action.id, date: action.date}\n        //         ],\n        //     })\n        // case UNSCHEDULE:\n        //     return Object.assign({}, state, {\n        //         scheduledTests: [\n        //             ...state.scheduledTests.filter(st => {\n        //                 return (st.id !== action.id ||\n        //                     st.date.toString() !== action.date.toString());\n        //             })\n        //         ],\n        //     })\n        case REQUEST + '_SCHEDULE':\n            return Object.assign({}, state, {\n                isFetching: true,\n            })\n        case RECEIVE + '_SCHEDULE':\n            return Object.assign({}, state, {\n                isFetching: false,\n                difficulty: action.items.difficulty,\n                scheduledTests: action.items.scheduledTests.map(item => {\n                    const date = new Date(item.date);\n                    date.setHours(0,0,0,0)\n                    return ({id: item.id, date: date});\n                }),\n                unscheduledTestsOptions: action.items.unscheduledTestsOptions,\n                // lastUpdated: action.receivedAt\n            })\n\n        default:\n            return state\n\n    }\n}\n\n// function session(state = {id: null}, action) {\n//     if (action.type === INIT_SESSION) {\n//         console.log(action)\n//         return Object.assign({}, state, {\n//             id: action.sessionId,\n//         })\n//     } else {\n//         return state;\n//     }\n// }\n\nexport default combineReducers({\n    session: ReducerCreator('Session'),\n    subjects: ReducerCreator('Subjects'),\n    classes : ReducerCreator('Classes'),\n    blockers : ReducerCreator('Blockers'),\n    tests : ReducerCreator('Tests'),\n    savedSchedules : ReducerCreator('ScheduleStore'),\n    // scheduledTests : ReducerCreator('Scheduled_Tests'),\n    schedule: schedulerState\n})","import {createStore, applyMiddleware, compose} from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\nimport rootReducer from './reducers'\n\nconst loggerMiddleware = createLogger()\n\nexport default function configureStore(preloadedState) {\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  // const store = createStore(reducer, /* preloadedState, */ composeEnhancers(\n\n  return createStore(\n      rootReducer,\n      preloadedState,\n      composeEnhancers(\n      applyMiddleware(thunkMiddleware, loggerMiddleware)\n      )\n  )\n}\n\n","import 'bootstrap/dist/js/bootstrap.bundle.min';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\n\nimport './index.css';\nimport App from './components/app/App';\nimport * as serviceWorker from './serviceWorker';\nimport configureStore from \"./configureStore\";\n\nconst store = configureStore()\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);\n\nserviceWorker.unregister();\n\n"],"sourceRoot":""}